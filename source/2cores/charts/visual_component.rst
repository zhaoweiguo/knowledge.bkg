可视化组件
##########

桑基图
======

* 如果一定要给桑基图贴一个标签的话，那一定是：展现数据流动的利器。
* 桑基图（Sankey diagram），即桑基能量分流图，也叫桑基能量平衡图。它是一种特定类型的流程图，图中延伸的分支的宽度对应数据流量的大小，通常应用于能源、材料成分、金融等数据的可视化分析。因1898年Matthew Henry Phineas Riall Sankey绘制的“蒸汽机的能源效率图”而闻名，此后便以其名字命名为“桑基图”。
* 桑基图最明显的特征就是，始末端的分支宽度总和相等，即所有主支宽度的总和应与所有分出去的分支宽度的总和相等，保持能量的平衡。

.. figure:: /images/charts/chart_sankey.png

   各手机品牌与年龄、性别的关系


.. figure:: /images/charts/chart_sankey2.jpg

   法国公共管理部门收支情况来源图。这张桑基图(Sankey Diagram)厘清了法国公共管理部门的资金来源，以及他们是如何分配这些资金的。最左边的支点代表了不同的资金来源，包括社会、个人税收等。这些资金在汇总到法国的四大公共管理部门后，被再分配到交通、环境保护、住房、教育、文化等各个领域。



气泡图
======

气泡图（bubble chart）是可用于展示三个变量之间的关系。它与散点图类似，绘制时将一个变量放在横轴，另一个变量放在纵轴，而第三个变量则用气泡的大小来表示。排列在工作表的列中的数据（第一列中列出 x 值，在相邻列中列出相应的 y 值和气泡大小的值）可以绘制在气泡图中。气泡图与散点图相似，不同之处在于：气泡图允许在图表中额外加入一个表示大小的变量进行对比。

.. figure:: /images/charts/chart_bubble.jpeg

   手机app留存相关




南丁格尔玫瑰图
==============

* 南丁格尔玫瑰图是弗罗伦斯·南丁格尔所发明的。又名为极区图。是一种圆形的直方图。 南丁格尔自己常昵称这类图为鸡冠花图（coxcomb），并且用以表达军医院季节性的死亡率，对象是那些不太能理解传统统计报表的公务人员。

* 玫瑰图实际是一种2维极坐标统计图,以动径和动径角表示制图对象按方位、时间或多项指标的统计数据,有很好的直观效果。常用于表示气象、气候现象如测站的风向频率等。

* 这种图表适合用于对比各类别的数据，而相比柱图/条形图等图表类型来说，南丁格尔玫瑰图能够放大数据差异。因为它使用扇区半径来表示数据的大小，半径和面积的关系是平方的关系，用户直觉上会通过面积来感知差异，所以它会将数据的比例大小夸大。这种放大数据差异的效果尤其适合对比大小相近的数值，或者像南丁格尔一样就是希望突出数据差异的场景。

.. note:: 当然在使用这个图表的时候需要注意，因为它夸大了数据的差异，比如两个类别数据原本差10倍，用这个图表就会给人一种差100倍的感觉。所以如果希望客观的展示数据，还是建议使用柱图等图表类型。

.. figure:: /images/charts/chart_rose.jpg

   南丁格尔用「玫瑰图」挽救了千万人的生命。这是一张19世纪50年代的图表，当时英国、法国、土耳其和俄国正在进行克里米亚战争。南丁格尔主动申请，自愿担任战地护士。南丁格尔发现改善医疗环境可以降低死亡率，所以做了这个图，向政府说明应该改善战地医院的条件来拯救更多年轻的生命。右侧的玫瑰图表示1854 年 4 月至 1955 年 3 月每月的死亡率，每月死亡率都非常高，高达42%。左侧的玫瑰图表示1955年3月卫生委员会改善了卫生环境之后，死亡率得到了大幅下降，戏剧性地降至 2.5%。另外图中灰色区域表示糟糕的医疗环境的感染导致的死亡，可以看到大部分的伤亡并非直接来自战争，而是因为医疗环境。


.. figure:: /images/charts/chart_rose2.jpg

   新冠肺炎




